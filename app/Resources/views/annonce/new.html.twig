<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Audry BABELA">
    <meta name="description" content="">

    <title>
        {% block title %}
            Annonces gratuites | Postez annonce gratuite
        {% endblock %}
    </title>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ asset('css/bootstrap.min.css', 'avatars') }}">
    <link rel="stylesheet" href="{{ asset('css/font-awesome.min.css', 'avatars') }}">
    <link rel="stylesheet" href="{{ asset('css/icofont.css', 'avatars') }}">
    <link rel="stylesheet" href="{{ asset('css/owl.carousel.css', 'avatars') }}">
    <link rel="stylesheet" href="{{ asset('css/slidr.css', 'avatars') }}">
    <link rel="stylesheet" href="{{ asset('css/main.css', 'avatars') }}">
    <link id="preset" rel="stylesheet" href="{{ asset('css/presets/preset1.css', 'avatars') }}">
    <link rel="stylesheet" href="{{ asset('css/responsive.css', 'avatars') }}">

    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Signika+Negative:400,300,600,700' rel='stylesheet'
          type='text/css'>

    <!-- icons -->
    <link rel="icon" href="{{ asset('favicon.ico') }}">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ asset('images/ico/apple-touch-icon-144-precomposed.png', 'avatars') }}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{{ asset('images/ico/apple-touch-icon-114-precomposed.png', 'avatars') }}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{{ asset('images/ico/apple-touch-icon-72-precomposed.png', 'avatars') }}">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="{{ asset('images/ico/apple-touch-icon-57-precomposed.png', 'avatars') }}">
    <!-- icons -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Template Developed Audry BABELA -->

    <script src="{{ asset('bundles/app/trade-template/js/jquery.min.js') }}"></script>

    <!-- Fine Uploader Gallery CSS file
    ====================================================================== -->
    <link href="{{ asset('bundles/annonce/fine-uploader/fine-uploader-gallery.css') }}" rel="stylesheet">

    <!-- Bootstrap file upload
    ====================================================================== -->

    <!-- bootstrap 4.x is supported. You can also use the bootstrap css 3.3.x versions

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">-->

    <link href="{{ asset('bundles/annonce/bootstrap-fileinput/css/fileinput.min.css') }}" media="all" rel="stylesheet" type="text/css" />
    <!-- if using RTL (Right-To-Left) orientation, load the RTL CSS file after fileinput.css by uncommenting below -->
    <!-- link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.5/css/fileinput-rtl.min.css" media="all" rel="stylesheet" type="text/css" /-->
    <!-- optionally uncomment line below if using a theme or icon set like font awesome (note that default icons used are glyphicons and `fa` theme can override it) -->
    <!-- link https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css media="all" rel="stylesheet" type="text/css" /-->

    {#<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>#}

    <!-- piexif.min.js is only needed for restoring exif data in resized images and when you
        wish to resize images before upload. This must be loaded before fileinput.min.js -->
    <script src="{{ asset('bundles/annonce/bootstrap-fileinput/js/plugins/piexif.min.js') }}" type="text/javascript"></script>
    <!-- sortable.min.js is only needed if you wish to sort / rearrange files in initial preview.
        This must be loaded before fileinput.min.js -->
    <script src="{{ asset('bundles/annonce/bootstrap-fileinput/js/plugins/sortable.min.js') }}" type="text/javascript"></script>
    <!-- purify.min.js is only needed if you wish to purify HTML content in your preview for
        HTML files. This must be loaded before fileinput.min.js -->

    <script src="{{ asset('bundles/annonce/bootstrap-fileinput/js/plugins/purify.min.js') }}" type="text/javascript"></script>
    <!-- popper.min.js below is needed if you use bootstrap 4.x. You can also use the bootstrap js
       3.3.x versions without popper.min.js. -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>

    <!-- bootstrap.min.js below is needed if you wish to zoom and preview file content in a detail modal
        dialog. bootstrap 4.x is supported. You can also use the bootstrap js 3.3.x versions. -->

    {#<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" type="text/javascript"></script>#}

    <!-- the main fileinput plugin file -->
    <script src="{{ asset('bundles/annonce/bootstrap-fileinput/js/fileinput.min.js') }}"></script>
    <!-- optionally uncomment line below for loading your theme assets for a theme like Font Awesome (`fa`) -->
    <!-- script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.5/themes/fa/theme.min.js"></script -->
    <!-- optionally if you need translation for your language then include  locale file as mentioned below -->
    <script src="{{ asset('bundles/annonce/bootstrap-fileinput/js/locales/LANG.js') }}"></script>



</head>
<body>
<!-- header -->
<header id="header" class="clearfix">
    <!-- navbar -->
    {% include '@Annonce/Default/menu.html.twig' %}
</header>
<!-- header -->

<!-- main -->
<section id="main" class="clearfix ad-details-page">
    <div class="container">

        <div class="breadcrumb-section">
            <!-- breadcrumb -->
            <ol class="breadcrumb">
                <li><a href="{{ path('accueil') }}">{{ 'agents.new.accueil'|trans({}, 'agents') }}</a></li>
                <li>{{'Annonce'|trans }}</li>
            </ol><!-- breadcrumb -->
            <h2 class="title">{{ 'agents.new.poster'|trans({}, 'agents') }}</h2>
        </div><!-- banner -->
        <div class="adpost-details">
            <div class="row">
                <div class="col-md-8">

                    {{ form_start(form, { 'multipart' : true, 'attr': {'class': 'dropzone'} }) }}
                    <fieldset>
                        <div class="section postdetails">
                            <h4>
                                {{ 'agents.new.titre'|trans({}, 'agents') }}
                                <span class="pull-right">* {{ 'agents.new.obligatoire'|trans({}, 'agents') }}</span>
                            </h4>

                            <div class="row form-group">
                                <label class="col-sm-3">{{ form_label(form.typeAnnonce) }}
                                    <span class="required">*</span></label>
                                <div class="col-sm-9 user-type">
                                    {{ form_errors(form.typeAnnonce) }}
                                    {{ form_widget(form.typeAnnonce) }}
                                </div>
                            </div>

                            <div class="row form-group add-title">
                                <label class="col-sm-3 label-title">
                                    {{ form_label(form.titre) }}
                                    <span class="required">*</span>
                                </label>
                                <div class="col-sm-9">
                                    {{ form_errors(form.titre) }}
                                    {{ form_widget(form.titre, { 'attr': {'class': 'form-control'} }) }}

                                </div>
                            </div>

                            <div class="row form-group add-title">
                                <label class="col-sm-3 label-title">
                                    {{ form_label(form.categorie) }}
                                    <span class="required">*</span>
                                </label>
                                <div class="col-sm-9">
                                    {{ form_errors(form.categorie) }}
                                    {{ form_widget(form.categorie, { 'attr': {'class': 'form-control'} }) }}

                                </div>
                            </div>

                            <div id="loader" class="row form-group add-title center-block hidden">
                                <center>
                                    <img src="{{ asset('bundles/annonce/trade-template/images/Spinner.gif') }}"  width="60px" height="60px">
                                </center>

                            </div>

                            <div class="row form-group add-title">
                                <label class="col-sm-3 label-title">{{ form_label(form.sousCategorie) }}
                                    <span class="required">*</span></label>
                                <div class="col-sm-9">
                                    {{ form_errors(form.sousCategorie) }}
                                    {{ form_widget(form.sousCategorie, { 'attr': {'class': 'form-control'} }) }}
                                </div>

                            </div>

                            <div class="row form-group item-description">
                                <label class="col-sm-3 label-title">{{ form_label(form.description) }}
                                    <span class="required">*</span></label>
                                <div class="col-sm-9">
                                    {{ form_errors(form.description) }}
                                    {{ form_widget(form.description) }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-9 col-sm-offset-3">
                                    <p>5000 characters left</p>
                                </div>
                            </div>

                            <div class="row form-group item-description">
                                <label class="col-sm-3 label-title">{{ form_label(form.etatArticleAnnonce) }}
                                    <span class="required">*</span></label>
                                <div class="col-sm-9">
                                    {{ form_errors(form.etatArticleAnnonce) }}
                                    {{ form_widget(form.etatArticleAnnonce, { 'attr': {'class': 'form-control'} }) }}
                                </div>
                            </div>

                            <div class="row form-group item-description">
                                <label class="col-sm-3 label-title">{{ form_label(form.prix) }}
                                    <span class="required">*</span></label>
                                <div class="col-sm-4">
                                    {{ form_errors(form.prix) }}
                                    {{ form_widget(form.prix, { 'attr': {'class': 'form-control'} }) }}
                                </div>
                                <div class="col-sm-5 checkbox-inline">
                                    {{ form_errors(form.devise) }}
                                    {{ form_widget(form.devise, { 'attr': {'class': 'form-control'} }) }}
                                </div>

                            </div>

                            <div class="row form-group item-description">
                                <label class="col-sm-3 label-title">{{ form_label(form.typePrix) }}
                                    <span class="required">*</span></label>
                                <div class="col-sm-9">
                                    {{ form_errors(form.typePrix) }}
                                    {{ form_widget(form.typePrix, { 'attr': {'class': 'form-control'} }) }}
                                </div>
                            </div>

                            <div class="row form-group add-image">
                                <label class="col-sm-3 label-title">
                                    <span></span> </label>
                                <div class="col-sm-9">
                                    <h5>
                                        <i class="fa fa-upload" aria-hidden="true"></i>
                                        Glissez deposez les photos de votre annonce
                                        <span>Vous pouvez télécharger plusieurs images</span>
                                    </h5>
                                </div>

                            </div>


                {% block upload %}

                    {#<input type="file" name="files" class="files" id="form_snippet_image"     data-msg-placeholder="Selectionnez {files} à uploader..." multiple>#}

                    {{ form_errors(form.documents) }}
                    {{ form_widget(form.documents) }}

                {% endblock %}


                            <div class="section seller-info">
                                <h4>Ville où se trouve l'objet vendu</h4>

                                <div class="row form-group add-title">
                                    <label class="col-sm-4 label-title">{{ form_label(form.adresseObjetVendu) }}
                                        <span class="required">*</span></label>
                                    <div class="col-sm-8">
                                        {{ form_errors(form.adresseObjetVendu) }}
                                        {{ form_widget(form.adresseObjetVendu, { 'attr': { 'class': 'form-control'} }) }}
                                    </div>
                                </div>

                            </div>
                            <!-- section -->

                            {% if is_granted('ROLE_USER') %}

                            {% else %}
                                <div class="section seller-info">
                                    <h4>Information du vendeur</h4>
                                    <div class="row form-group">
                                        <label class="col-sm-3 label-title">
                                            Vous etres un : <span class="required">*</span></label>
                                        <div class="col-sm-9">
                                            <input type="radio" name="sellerType" value="individual" id="individual">
                                            <label for="individual">Particulier</label>
                                            <input type="radio" name="sellerType" value="dealer" id="dealer">
                                            <label for="dealer">Professionnel</label>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <label class="col-sm-3 label-title">
                                            Vos noms & prénom<span class="required">*</span></label>
                                        <div class="col-sm-9">
                                            <input type="text" name="name" class="form-control" placeholder="ex, Jhon Doe">
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <label class="col-sm-3 label-title">
                                            Votre Email<span class="required">*</span></label>
                                        <div class="col-sm-9">
                                            <input type="email" name="email" class="form-control" placeholder="ex, jhondoe@mail.com">
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <label class="col-sm-3 label-title">
                                            Numéro de tel<span class="required">*</span></label>
                                        <div class="col-sm-9">
                                            <input type="text" name="mobileNumber" class="form-control" placeholder="ex, +912457895">
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <label class="col-sm-3 label-title">
                                            Addresse</label>
                                        <div class="col-sm-9">
                                            <input type="text" name="address" class="form-control" placeholder="ex, alekdera House, coprotec, usa">
                                        </div>
                                    </div>
                                </div><!-- section -->
                            {% endif %}

                            <div class="section">
                                <h4>Mettez votre annonce </h4>
                                <p>Mettez votre annonce en avant en l'affichant sur la premiere page du site.
                                    Maximisez vos chances de vente ou d'achat. <a href="#">En savoir plus</a></p>
                                <ul class="premium-options">
                                    <li class="premium">
                                        <input type="radio" name="premiumOption" value="day-one" id="day-one">
                                        <label for="day-one">Regular Ad Per Day</label>
                                        <span>$20.00</span>
                                    </li>
                                    <li class="premium">
                                        <input type="radio" name="premiumOption" value="day-two" id="day-two">
                                        <label for="day-two">Top Ad for 3 days</label>
                                        <span>$30.00</span>
                                    </li>
                                    <li class="premium">
                                        <input type="radio" name="premiumOption" value="day-three" id="day-three">
                                        <label for="day-three">Top Ad for 7 days</label>
                                        <span>$50.00</span>
                                    </li>

                                </ul>
                            </div><!-- section -->

                            <div class="checkbox section agreement">
                                <label for="send">
                                    <input type="checkbox" name="send" id="send">
                                    Send me Trade Email/SMS Alerts for people looking to buy mobile handsets
                                    in www By clicking "Post", you agree to our <a href="#">Terms of Use</a> and
                                    <a href="#">Privacy Policy</a>
                                    and acknowledge that you are the rightful owner of this item and using Trade
                                    to find a genuine buyer.
                                </label>


                                <button type="submit" id="enregister-post" class="btn btn-primary">
                                    Poster votre annonce
                                </button>

                            </div><!-- section -->
                        </div>
                    </fieldset>
                    {{ form_end(form) }}
                    <!-- form -->
                </div>


                <!-- quick-rules -->
                <div class="col-md-4">
                    <div class="section quick-rules">
                        <h4>Quelques règles</h4>
                        <p class="lead">Poster une annonce sur <a href="#">congo-market.com</a>
                            est gratuit, mais il faut respecter les regles suivantes:</p>

                        <ul>
                            <li>Poster dans la bonne categorie</li>
                            <li>Ne pas reposter la meme annonce plusieurs fois ou dans differentes catégories.</li>
                            <li>Ne pas télécharger des images avec annonce publicitaire</li>
                            <li>Pas d'annonces à caractère sexuel ou pédophile.</li>
                            <li>Pas de vente d'arme, de drogue ou toutes autres substances
                                interdites dans votre pays de résidence.</li>
                            <li>Ne pas inserer votre nom ou numéro de téléphone dans le titre ou la description.</li>
                            <li>Rassurer vous que votre poste est dans la bonne catégorie.</li>
                            <li>Ne pas poster une annonce mensongère dans le but d'arnaquer les internautes.
                                Des poursuites pourront etre lancées contre vous.</li>
                            <li>Vous etes le(s) seul(s) responsable de vos publication</li>
                        </ul>
                    </div>
                </div><!-- quick-rules -->
            </div><!-- photos-ad -->
        </div>
    </div><!-- container -->
</section><!-- main -->

<!-- footer -->

{% block javascript %}

    {#JQuery #}


<script>

//    $(document).on('ready', function() {

        var $el1 = $("#annoncebundle_annonce_documents_name");

        $el1.fileinput({
            theme: 'fa',
            uploadUrl: "{{path('ajax_snippet_image_send')}}",

            uploadAsync: true,
            showRemove: true,
            showUpload: false,
            showCaption: true,
            showCancel: true,

            browseOnZoneClick: false,
            removeFromPreviewOnError: true,

            previewSettings:     {
                image: {width: "100%", height: "100%", 'max-width': "100%", 'max-height': "100%"},
                html: {width: "200px", height: "160px"},
                text: {width: "200px", height: "160px"},
                office: {width: "200px", height: "160px"},
                video: {width: "200px", height: "160px"},
                audio: {width: "100%", height: "30px"},
                flash: {width: "200px", height: "160px"},
                object: {width: "213px", height: "160px"},
                pdf: {width: "200px", height: "160px"},
                other: {width: "200px", height: "160px"}
            },

            minFileCount: 1,
            maxFileCount: 2,
            maxFileSize: 4000,
            maxFilePreviewSize: 50024,
            maxFileCount: 10,

            allowedFileExtensions: ["jpg", "jpeg", "png", "pdf"],

            overwriteInitial: true,
            browseClass:   "btn btn-success",
            browseLabel:   "Ajouter les fichiers",
            browseIcon:    "<i class=\"glyphicon glyphicon-picture\"></i> ",
            removeClass:   "btn btn-danger",
            removeLabel:   "Supprimer",
            removeIcon:    "<i class=\"glyphicon glyphicon-trash\"></i>",
            uploadClass:   "btn btn-info",
            uploadLabel:   "Telecharger",
            uploadIcon:    "<i class=\"glyphicon glyphicon-upload\"></i> ",
            msgCancelled: "Annulé",
            msgPlaceholder: "text"
        }).on('filesorted', function(e, params) {
            console.log('file sorted', e, params);
        }).on('fileuploaded', function(e, params) {
            console.log('file uploaded', e, params);
        }).on("filebatchselected", function(event, files) {
            $el1.fileinput("upload");
        });

//    });



    var $sport = $('#annoncebundle_annonce_categorie');
    // When sport gets selected ...
    $sport.change(function() {
        //affiche un loader de chargement des données
        $("#loader").removeClass('hidden');
        // on desactive la sous-categorie
        $("#annoncebundle_annonce_sousCategorie").prop('disabled', true);
        // ... retrieve the corresponding form.
        var $form = $(this).closest('form');
        // Simulate form data, but only include the selected sport value.
        var data = {};
        data[$sport.attr('name')] = $sport.val();
        // Submit data via AJAX to the form's action path.
        $.ajax({
            url : $form.attr('action'),
            type: $form.attr('method'),
            data : data,
            success: function(html) {
                // Replace current position field ...
                $('#annoncebundle_annonce_sousCategorie').replaceWith(
                    // ... with the returned one from the AJAX response.
                    $(html).find('#annoncebundle_annonce_sousCategorie')
                );
                //cache le loader en cas de réussite
                $("#loader").addClass('hidden');
            },
            error: function (request, status, error) {
                $("#loader").addClass('hidden');
                console.log(request.responseText);

            }
        });
    });
    //cache le loader en cas de réussite
    $("#loader").addClass('hidden');
</script>

<script>
    // This example displays an address form, using the autocomplete feature
    // of the Google Places API to help users fill in the information.

    var placeSearch, autocomplete;
    var componentForm = {
        //street_number: 'short_name',
        //route: 'long_name',
        locality: 'long_name',
        administrative_area_level_1: 'short_name',
        country: 'long_name',
        //postal_code: 'short_name'
    };

    function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
            /** @type {!HTMLInputElement} */(document.getElementById('annoncebundle_annonce_adresseObjetVendu')),
            {types: ['geocode']});

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
    }

    // [START region_fillform]
    function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();

        for (var component in componentForm) {
            document.getElementById(component).value = '';
            document.getElementById(component).disabled = false;
        }

        // Get each component of the address from the place details
        // and fill the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
            var addressType = place.address_components[i].types[0];
            if (componentForm[addressType]) {
                var val = place.address_components[i][componentForm[addressType]];
                document.getElementById(addressType).value = val;
            }
        }
    }
    // [END region_fillform]

    // [START region_geolocation]
    // Bias the autocomplete object to the user's geographical location,
    // as supplied by the browser's 'navigator.geolocation' object.
    function geolocate() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var geolocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                var circle = new google.maps.Circle({
                    center: geolocation,
                    radius: position.coords.accuracy
                });
                autocomplete.setBounds(circle.getBounds());
            });
        }
    }
    // [END region_geolocation]

</script>
{% endblock %}

{% block footer %}
    {% include '@Annonce/Default/footer.html.twig' %}
{% endblock %}

</body>
</html>
